[{"categories":["數據分析"],"contents":" 使用情境 根據 82 法則，當我們想知道全球 80% 的GDP 是集中在哪些國家上，可以使用「累積加總」的概念，找出正確的國家名單。\n不過，接下來使用的範例不會是完整的全球 GDP 資料，詳細的原因和完整的使用情境可以參考之前的文章：【Stata】計算累計加總的方法\n原始資料 Country GDP2021 GDPpercent USA 2.332E+13 44% China 1.782E+13 33% Germany 4.260E+12 8% UK 3.122E+12 6% Japan 5.006E+12 9% *GDP的資料可以從世界銀行 (World Bank) 的網站下載\nSQL 程式碼 *使用視窗函數 (Window Function) 計算累計加總\nSELECT Country, GDP2021, GDPpercent, -- 視窗函數：根據 GDPpercent 大小(降冪排序)，加總 GDPpercent SUM(GDPpercent) OVER (ORDER BY GDPpercent DESC) AS cumulative FROM GDP; 建立 cumulative 後的資料 Country GDP2021 GDPpercent cumulative USA 2.332E+13 44% 44% China 1.782E+13 33% 77% Japan 5.006E+12 9% 86% Germany 4.260E+12 8% 94% UK 3.122E+12 6% 100% ","permalink":"https://yhchen753.github.io/blog/da-6-sql/","tags":["SQL"],"title":"【SQL】計算累計加總的方法"},{"categories":["數據分析"],"contents":" 使用情境 根據 82 法則，當我們想知道全球 80% 的GDP 是集中在哪些國家上，可以使用「累積加總」的概念，找出正確的國家名單。\n不過，接下來使用的範例不會是完整的全球 GDP 資料，詳細的原因和完整的使用情境可以參考之前的文章：【Stata】計算累計加總的方法\n原始資料 Excel欄位 A B C 1 Country GDP2021 GDPpercent 2 USA 2.332E+13 44% 3 China 1.782E+13 33% 4 Germany 4.260E+12 8% 5 UK 3.122E+12 6% 6 Japan 5.006E+12 9% *GDP的資料可以從世界銀行 (World Bank) 的網站下載\nExcel 語法 在計算累計加總前，有兩個地方要注意：\n記得先對 GDPpercent 做由大到小的降冪排序\n記得要鎖定儲存格 ($C$2)，這樣在 cumulative 欄位的計算才會是正確的\nExcel欄位 A B C D E 1 Country GDP2021 GDPpercent cumulative Excel語法 2 USA 2.332E+13 44% 44% =SUM($C$2:C2) 3 China 1.782E+13 33% 77% =SUM($C$2:C3) 4 Japan 5.006E+12 9% 86% =SUM($C$2:C4) 5 Germany 4.260E+12 8% 94% =SUM($C$2:C5) 6 UK 3.122E+12 6% 100% =SUM($C$2:C6) ","permalink":"https://yhchen753.github.io/blog/da-5-excel/","tags":["Excel"],"title":"【Excel】計算累計加總的方法"},{"categories":["數據分析"],"contents":" 使用情境 這篇文章的發想來自 82 法則 (Pareto Principle)，常見的說法是 80% 的財富集中在 20% 的人手上，如果我們有這份財富統計資料，想要知道這 20% 的人的名單的話，就可以用「累積加總」的概念找出 80% 的財富是集中在哪些人的手上。\n用一個更好理解的方式來說，就是當我們想知道全球 80% 的GDP (也可以是90%或70% 這個比例可以自己調整) 是集中在哪些國家上，就會需要用到「累積加總」的概念，這樣才能找出正確的國家名單。\n因為過去的經驗，接下來使用的範例不會是完整的全球 GDP 資料，會這樣做的原因是自己過去爬文的經驗，當我嘗試找一個解法的時候，常常需要花很多時間去理解分享範例中的分析脈絡和資料型式，有的時候會被帶著跑，看完覺得好像有學到新的東西，但原本的問題還是沒有解決 (笑)。\n所以我自己在做筆記和練習分享的時候，會盡量用最簡潔和好懂的數據做介紹，瞭解語法的概念或步驟，才可以實際應用在自己手邊的資料，畢竟每個人要應用的情境都不相同。\n原始資料 Country GDP2021 GDPpercent USA 2.332E+13 44% China 1.782E+13 33% Germany 4.260E+12 8% UK 3.122E+12 6% Japan 5.006E+12 9% *GDP的資料可以從世界銀行 (World Bank) 的網站下載\nStata 程式碼 // Step1: GDPpercent 由大到小的降冪排序 gsort -GDPpercent // Step2: for迴圈 計算累計加總 gen cumulative = . local percent = 0 forv obs_number = 1/`=_N\u0026#39; { // 取出特定列數的 GDPpercent local raw_percent = GDPpercent[`obs_number\u0026#39;] // 計算累計加總 local percent = `percent\u0026#39; + `raw_percent\u0026#39; // 存入 cumulative 變數 replace cumulative = `percent\u0026#39; if _n == `obs_number\u0026#39; } 建立 cumulative 後的資料 Country GDP2021 GDPpercent cumulative USA 2.332E+13 44% 44% China 1.782E+13 33% 77% Japan 5.006E+12 9% 86% Germany 4.260E+12 8% 94% UK 3.122E+12 6% 100% ","permalink":"https://yhchen753.github.io/blog/da-4-stata/","tags":["Stata"],"title":"【Stata】計算累計加總的方法"},{"categories":["數據分析"],"contents":" 資料型態介紹 這次是要介紹 Excel 使用，但在一開始要說一下資料的型態可以分成兩種： 1. Panel data (縱橫資料) 2. Cross-sectional data (截面資料)，後面 Excel 的示範會需要注意到資料的型態，操作上會有一點點的差異，不過基本上只要夠熟悉自己手邊要分析的資料，資料型態是可以互換的。\nPanel data (縱橫資料)\nCountry Year GDP USA 2019 2.138E+13 USA 2020 2.106E+13 USA 2021 2.332E+13 China 2019 1.428E+13 China 2020 1.469E+13 China 2021 1.782E+13 Germany 2019 3.888E+12 Germany 2020 3.890E+12 Germany 2021 4.260E+12 UK 2019 2.857E+12 UK 2020 2.705E+12 UK 2021 3.122E+12 Japan 2019 5.118E+12 Japan 2020 5.049E+12 Japan 2021 5.006E+12 Cross-sectional data (截面資料)\nCountry 2019 2020 2021 USA 2.138E+13 2.106E+13 2.332E+13 China 1.428E+13 1.469E+13 1.782E+13 Germany 3.888E+12 3.890E+12 4.260E+12 UK 2.857E+12 2.705E+12 3.122E+12 Japan 5.118E+12 5.049E+12 5.006E+12 *GDP 的資料可以在世界銀行 (World Bank) 的網站下載\n使用情境 一般來說，當我們將上面 GDP 的資料丟進去 Excel 畫圖後，出現的是比較「多個國家」不同年間的 GDP 的差距 (如下圖 1)，當我們擁有的資料內國家的數量越來越多的時候，直接將資料丟進 Excel 出來的圖表就會變得非常雜亂。\n這種情況下，當我們只想要知道「單一國家」不同年間的 GDP 變化，又或者是因為資料筆數很多需要以圖表呈現的時候，就可以使用「下拉式選單」的方式來完成，也可以節省很多排版的空間。\n圖 1：「多個國家」不同年間的 GDP 的差距\n*圖片來源：YH Chen\n操作示範 接下來就開始介紹在 Excel 中，設定「下拉式選單」的兩個方法\n方法 1：自己從頭建立，這個方法稍微麻煩一點，但是可以多熟悉一下 Excel 函數的使用邏輯。\n方法 2：樞紐分析 (PivotTable)，是很直覺簡單的方式，想要快速完成工作就直接看樞紐分析就好。\n我也是試過「方法 1」後，才發現使用樞紐分析真的是好方便啊，而且完成後兩者之間基本上是沒有差別的，不過這兩個方法一開始丟進 Excel 的資料型態是不同的，要使用哪一個方法可以根據自己手邊有的資料型態去做選擇喔！\n自己從頭建立 (Cross-sectional data 截面資料) Excel 函數拆解和用法介紹 =INDEX($B$3:$D$7,$H$3,MATCH(I2,$B$2:$D$2,0))\nINDEX函數的用途：回傳資料內容\nINDEX公式：INDEX（資料範圍，移動列數，移動欄數）\n實際的用法：INDEX（$B$3:$D$7，$H$3，MATCH(I2,$B$2:$D$2,0)）\nMATCH函數的用途：回傳資料位置\nMATCH公式：MATCH（要被搜尋的值，搜尋範圍，搜尋方式）\n實際的用法：MATCH（I2，$B$2:$D$2，0）\n樞紐分析 (Panel data 縱橫資料) ","permalink":"https://yhchen753.github.io/blog/da-3-excel/","tags":["Excel","Visualization"],"title":"【Excel】下拉式選單設定的兩個方法"},{"categories":["數據分析"],"contents":" 使用情境 不管是在什麼領域和情境下，圓餅圖都是我們很常會使用到的資料視覺化圖形。\n不過以我自己的經驗來說，圓餅圖有時候在文件和簡報的排版上，呈現出來效果的不太理想 (看起來太重或是很擠)，這時候改成用圓環圖來呈現的話，文件或簡報就會看起來相對簡約和美觀。\n這次會分別記錄圓餅圖、圓環圖的設定，不過主要是想要介紹『圓環圖』的設定。\n使用台灣人口結構分佈的資料來做示範，為了方便操作有事先將資料整理過和簡化，完整的台灣人口統計資料可以從內政部戶政司的網站下載，整理後的資料形式如下：\n原始資料 年齡區段 人口數 人口數 (%) 0-19歲 3,829,910 16.35 20-64歲 15,293,547 65.30 65歲以上 4,296,985 18.35 *資料截至2023年12月底\n操作示範 在寫這篇的時候，發現 Tableau 的操作很難用文字的方式解釋清楚，因為裡面很多功能的設定都是靠拖曳的方式完成，所以示範操作的過程就直接用影片的方式來記錄了。\n圓餅圖 圓環圖 ","permalink":"https://yhchen753.github.io/blog/da-2-tableau/","tags":["Tableau","Visualization"],"title":"【Tableau】圓餅圖、圓環圖 設定"},{"categories":["數據分析"],"contents":" 使用情境 當我們想要看各國 GDP 的變動情形，會需要2個步驟：\nStep 1. 建立基準年變數 Base2020 ， 以 2020年的 GDP 資料為基準年\nStep 2. 使用 GDP 和 Base2020 來計算變動的差異\n這邊只示範 \u0026lt;Step 1.\u0026gt; 建立 Base2020 的方法，首先原始資料包含 Country、 Year 和 GDP 3 個變數，資料形式如下：\n原始資料 Country Year GDP USA 2019 2.138E+13 USA 2020 2.106E+13 USA 2021 2.332E+13 China 2019 1.428E+13 China 2020 1.469E+13 China 2021 1.782E+13 Germany 2019 3.888E+12 Germany 2020 3.890E+12 Germany 2021 4.260E+12 UK 2019 2.857E+12 UK 2020 2.705E+12 UK 2021 3.122E+12 Japan 2019 5.118E+12 Japan 2020 5.049E+12 Japan 2021 5.006E+12 *GDP的資料可以從世界銀行 (World Bank) 的網站下載\nStata Code 建立基準年的語法：egen Base2020 = total(cond(Year == 2020, GDP, .)), by(Country)\n上面這段 Code，可以拆解成 2 個部分 ：\negen 函數，egen new_var = total (GDP), by(Country) 這段語法的意思是建立新變數 new_var ，new_var 的內容，是根據 Country 加總所有的 GDP\ncond 函數，cond(Year == 2020, GDP, .) 上面語法的意思，當資料中變數 Year = 2020時，回傳變數 GDP 的值，如果變數 Year ≠ 2020時，則回傳 .，條件函數的使用：cond(條件, 條件符合時回傳的內容, 條件不符合時回傳的內容)\n最後，再將 egen 函數 和 cond 函數合併後，就可以得到以 2020年的 GDP 資料為基準年的資料，用 total 來設定的原因是因為資料中，每個國家每一年只會有一個GDP資料，不會有重複加總的問題，建立 Base2020 後的資料形式如下：\n建立 Base2020 後的資料 Country Year GDP Base2020 USA 2019 2.138E+13 2.106E+13 USA 2020 2.106E+13 2.106E+13 USA 2021 2.332E+13 2.106E+13 China 2019 1.428E+13 1.469E+13 China 2020 1.469E+13 1.469E+13 China 2021 1.782E+13 1.469E+13 Germany 2019 3.888E+12 3.890E+12 Germany 2020 3.890E+12 3.890E+12 Germany 2021 4.260E+12 3.890E+12 UK 2019 2.857E+12 2.705E+12 UK 2020 2.705E+12 2.705E+12 UK 2021 3.122E+12 2.705E+12 Japan 2019 5.118E+12 5.049E+12 Japan 2020 5.049E+12 5.049E+12 Japan 2021 5.006E+12 5.049E+12 \u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026ndash;\ncond 函數的其他使用方式 單一條件分組 gen group1 = cond(GDP \u0026gt;= 2.69e+12, \u0026quot;super high\u0026quot;, \u0026quot;high\u0026quot;) 多個條件分組 gen group2 = cond(GDP \u0026gt;= 5.05e+12, \u0026quot;A++\u0026quot;, cond(GDP \u0026gt;= 1.90e+12 \u0026amp; GDP \u0026lt; 5.05e+12, \u0026quot;A+\u0026quot;, cond(GDP \u0026lt; 1.90e+12 , \u0026quot;A\u0026quot;, \u0026quot;.\u0026quot;))) 分組後的資料 Country Year GDP group1 group2 Brazil 2020 1.476E+12 high A Canada 2020 1.648E+12 high A China 2020 1.469E+13 super high A++ France 2020 2.639E+12 high A+ Germany 2020 3.890E+12 super high A+ India 2020 2.672E+12 high A+ Italy 2020 1.897E+12 high A Japan 2020 5.049E+12 super high A+ UK 2020 2.705E+12 super high A+ USA 2020 2.106E+13 super high A++ ","permalink":"https://yhchen753.github.io/blog/da-1-stata/","tags":["Stata"],"title":"【Stata】基準值設定"},{"categories":["閱讀書單"],"contents":" 1.歐巴當道憑什麼？全方位解析韓國文化產業崛起的祕密 我雖然也算愛看韓劇，但其實不算一個對韓流著迷的人，尤其是對於K-pop的流行真的一知半解，不過這幾年常常看到韓國音樂攻進歐美排行榜或是MV有破紀錄的點閱率等等的新聞報導，讓我對韓國影視文化產業的模式產生好奇心。\n書裡面提到讓我印象最深刻的是，作者寫到因為幾千年來歷史的關係，發展出韓國人內心集體意識中的「恨」和「恥辱」，也是因為這股力量造就韓國人對國家的高度向心力，作者提到 『韓國人的態度：凡事對國家有益的事，也會對企業有利，而只要企業穩定成長，對個人也絕對有益。』 ，從這句話中，我們大概就可以明白韓國為什麼可以成功的傾國家之力來推動影視文化發展和輸出。\n2. 低谷 這本書很薄但裡面有超級多金句，書裡面提到 『放棄』 的概念的時候，讓我感受到少有的 Aha moment！尤其是 『贏家通常懂得適時放棄，而且放棄者未必是輸家。』 ，讓我有很多的反思，我們的教育常常告訴我們做事情或學習不能輕言放棄，但事實上比起堅持，懂得適時地放棄可能更需要智慧，舉個簡單的例子，在股票市場裡停損就可以套用在書裡面『放棄』的概念，適時的『放棄』是需要練習的，也是我目前正在練習的事情，這本書已經絕版了，想要看的話只能去圖書館找找看了。\n3. 解讀者 現在是資訊爆炸的時代，遇到不懂的事情只要上網一搜就可以知道略知一二，再加上ChatGpt的問世，我覺得現在只要是會使用網路，基本上就沒有所謂的『文盲』了，但是在每個人都可以輕鬆達到平均水準的情況下，擁有『解讀力』就變成了很重要的能力了，因為 『人對世界的認知，往往受制於我們所擁有的解讀能力。』 ，這本書裡面提供了很多思考架構和工具，是一本隨時翻開都可以有新啟發的書，書裡面有一句話我很喜歡也常常會提醒自己 『如果解讀的結果有問題，往往有問題的不是工具，而是解讀者自身。』 ，所以除了使用工具客觀地理解外在世界，也要同時瞭解和觀察自己的內在世界。\n4. 小王子 這本書應該是大家都有聽過也很熟悉的，會重新找來看是因為我今年陸陸續續在不同的地方，像是Podcast和網路文章看到，在講書裡面小王子和狐狸的豢養關係，有從戀愛追求關係切入，也有從職場中上司和下屬的關係切入，基本上都是在討論人際關係的建立，不過除了人際關係的豢養，我反而從書裡面讀到了一種，雖然我知道，我們總有一天會分離或走往不同的方向，但我還是願意『 陪你走一段』的感覺，我覺得這是最勇敢也最感人的地方。\n5. 被討厭的勇氣 二部曲完結篇：人生幸福的行動指南 看完被討厭的勇氣一部曲後，讓我印象最深刻是『課題分離』的概念，這個概念讓我在遇到問題的時候比較不會被道德感綁架，也是讓我收穫最多的部分，雖然我不太習慣對談式的寫作風格，但讀完以後就可以理解為什麼這本書會被說成『差點被書名耽誤的書』。\n二部曲相對於於我來說，雖然沒有像一部曲有這麼深刻的記憶點，但卻反而有種挑戰到自己一些既有的價值觀的感覺，是屬於拓展認知邊界的書，甚至在閱讀的過程中會出現真想和哲學家對談啊，年輕人沒有問到我想問得問題啊的感覺 (笑)，不過書裡面有寫到一句我很喜歡的話 『哲學與其說是一門學問，不如說是生活的態度。』 ，所以對於和差異的部分，我也學著試著理解這樣的態度，而不是去追求學問的解答。\n","permalink":"https://yhchen753.github.io/blog/reading-1/","tags":[" "],"title":"2023年 5本好書推薦"},{"categories":["其他分類"],"contents":" 這是網站第一篇文章，想來說說為什麼想要建立自己的個人網站和整個架站的過程和心得\n1. 建立個人網站的原因\n會想要架設自己的個人網站，是因為想要紀錄自己學習數據分析過程之中學到的東西和軟體的操作技巧，像是有一些軟體上很棒的功能和小技巧，常常因為使用到的機會不高，很容易忘記，等到真的要用的時候又要花非常多的時間在網上搜尋，所以就想要利用網站的方式慢慢建立自己的筆記和學習心得，或許也有機會幫助到正在學習數據分析的人。\n2. 架站過程和心得\n整個架站的過程是跟著hahow上面的 \u0026laquo;Github 免費架站術！\u0026raquo; 課程 一步一步完成的，在上課的當下我是對HTML語言完全沒有概念的，但因為有在學習Python和R，所以對於介面上密密麻麻的程式不會感覺到害怕，按照課程架構順順的就把網站架設起來了，加上現階段建立個人網站的目標是想要累積內容，所以對美化的版面也沒有太大的需求，不過因為這次從無到有的架站經驗，讓我會想要多了解HTML和網頁相關的概念，簡短的架站心得當作個人網站的起點，之後這裡主要會紀錄數據分析學習相關的內容和一些讀過覺得不錯的好書。\n","permalink":"https://yhchen753.github.io/blog/start/","tags":["GitHub"],"title":"網站的起點和架站心得"}]